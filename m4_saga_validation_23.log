=========================================
   M4 SURGICAL TEST RUNNER (NEON/SER)    
=========================================
Environment: DATABASE_URL aligned to M4 Target (Dynamic Import Mode).
Environment: SERIALIZABLE Enforced.

>> RUNNING: Race Release (Option A: 500 Manual Clients - No Pool)
[04:22:29] [32mINFO[39m: [36m>>> STARTING M4 RACE RELEASE (OPTION A - STRICT) <<<[39m
    module: "service"
   [PASS] 1042ms

>> RUNNING: Saga Fault Injection (Stripe Down)
[04:22:29] [32mINFO[39m: [36mPreparing ledger transaction: PAYOUT_RELEASE[39m
    module: "service"
    txId: "01KCAZ49RVBZ0437FKS5RZHHS1"
    type: "LedgerPrepare"
[04:22:30] [32mINFO[39m: [36mTransaction PREPARED (Pending)[39m
    module: "service"
    txId: "01KCAZ49RVBZ0437FKS5RZHHS1"
    type: "LedgerPrepare"
[04:22:30] [32mINFO[39m: [36mTransaction COMMITTED[39m
    module: "service"
    txId: "01KCAZ49RVBZ0437FKS5RZHHS1"
    type: "LedgerCommit"
[04:22:30] [32mINFO[39m: [36m>>> STARTING M4 SAGA FAULTS (STRIPE DOWN) <<<[39m
    module: "service"
   [PASS] 861ms

>> RUNNING: Ledger Consistency & Integrity
   [PASS] 85ms

=========================================
   M4 FINAL REPORT                       
=========================================
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Case                                                    â”‚ Status â”‚ Time     â”‚ Stats                                                                           â”‚ Error â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0       â”‚ 'Race Release (Option A: 500 Manual Clients - No Pool)' â”‚ 'PASS' â”‚ '1042ms' â”‚ '{"successes":1,"failures":9,"processedCount":1,"finalVersion":2,"workers":10}' â”‚ ''    â”‚
â”‚ 1       â”‚ 'Saga Fault Injection (Stripe Down)'                    â”‚ 'PASS' â”‚ '861ms'  â”‚ '{"status":"Correctly Rolled Back"}'                                            â”‚ ''    â”‚
â”‚ 2       â”‚ 'Ledger Consistency & Integrity'                        â”‚ 'PASS' â”‚ '85ms'   â”‚ '{"checkedTransactions":"ALL"}'                                                 â”‚ ''    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

Status: CERTIFIED (M4).
[04:22:31] [32mINFO[39m: [36mPreparing ledger transaction: PAYOUT_RELEASE[39m
    module: "service"
    txId: "01KCAZ4AW411NYMDDFX8DD54HA"
    type: "LedgerPrepare"
[04:22:31] [33mWARN[39m: [36mDuplicate transaction detected (Idempotency). Returning existing.[39m
    module: "service"
    txId: "01KCAZ4AW411NYMDDFX8DD54HA"
    type: "LedgerPrepare"
[04:22:31] [31mERROR[39m: [36mSaga Failed from Engine[39m
    module: "service"
    taskId: "101b905f-66f1-4c57-9f37-dbef4a26792c"
    eventType: "RELEASE_PAYOUT"
    err: {
      "type": "Error",
      "message": "stripe_server_error",
      "stack":
          Error: stripe_server_error
              at Object.capture (/Users/sebastiandysart/HustleXP/hustlexp-ai-backend/src/tests/m4/cases/saga-faults.ts:83:46)
              at effectReleasePayout (/Users/sebastiandysart/HustleXP/hustlexp-ai-backend/src/services/StripeMoneyEngine.ts:134:44)
              at executeStripeEffects (/Users/sebastiandysart/HustleXP/hustlexp-ai-backend/src/services/StripeMoneyEngine.ts:81:26)
              at Object.handle (/Users/sebastiandysart/HustleXP/hustlexp-ai-backend/src/services/StripeMoneyEngine.ts:318:31)
              at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
              at async Object.run (/Users/sebastiandysart/HustleXP/hustlexp-ai-backend/src/tests/m4/cases/saga-faults.ts:92:13)
              at async main (/Users/sebastiandysart/HustleXP/hustlexp-ai-backend/src/tests/m4/m4-runner.ts:73:28)
    }
