# HustleXP CODEOWNERS
# 
# Files in this repository that require code review before merging.
# Protected paths: Payment core, escrow, XP, and invariant tests.
#
# Phase D: Payment processing core is constitutional law - all changes require review.
#
# See: https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners

# ============================================================================
# PAYMENT CORE (Phase D - Constitutional Law)
# ============================================================================
# These files define the payment processing correctness guarantees.
# ANY change requires review from payment system owners.

# Database schema (escrows, stripe_events, xp_ledger)
backend/database/constitutional-schema.sql @sebastiandysart

# Stripe webhook handler (pure ingestion)
backend/src/services/StripeWebhookService.ts @sebastiandysart

# Payment worker (atomic claims, state transitions)
backend/src/jobs/payment-worker.ts @sebastiandysart

# Escrow service (state machine, transitions)
backend/src/services/EscrowService.ts @sebastiandysart

# Maintenance worker (recovery jobs)
backend/src/jobs/maintenance-worker.ts @sebastiandysart

# Invariant tests (kill tests that must pass)
backend/tests/invariants/ @sebastiandysart

# Database migrations affecting payment core
backend/database/migrations/add_claimed_at_to_stripe_events.sql @sebastiandysart

# ============================================================================
# SYSTEM GUARANTEES INFRASTRUCTURE
# ============================================================================
# Outbox pattern, queues, workers - these enforce system guarantees

backend/src/jobs/outbox-worker.ts @sebastiandysart
backend/src/jobs/outbox-helpers.ts @sebastiandysart
backend/src/jobs/queues.ts @sebastiandysart
backend/src/jobs/workers.ts @sebastiandysart

# ============================================================================
# XP & TRUST SYSTEMS
# ============================================================================
# XP and trust tier logic - critical for gamification correctness

backend/src/services/XPService.ts @sebastiandysart
backend/tests/invariants/inv-1.test.ts @sebastiandysart
backend/tests/invariants/inv-2.test.ts @sebastiandysart
